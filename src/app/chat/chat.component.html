<div class="chat-toolbar">
  <div class="logo">
    <img src="assets/chat-logo.svg"/>
    <span>Secure Chat Project</span>
  </div>
  <div *ngIf="authService.currentUser" class="user-profile">
    <span>
      Welcome, <b> {{ authService.currentUser.name }} {{ authService.currentUser.lastName }} </b>
    </span>
    <img [src]="'../../assets/avatar.png'" height="37px" width="36px"/>
    <span style="margin-left: 30px"><button (click)="logout()" class="btn btn-outline-danger"> Logout</button></span>
  </div>
</div>
<div class="chat-page">
  <div class="row " style="  padding-top: 100px;width: 100%">
    <div class="col-md-6">

      <div class="chat-box">
        <app-contacts-list (userSelected)="selectUser($event);" [messages]="messages" [users]="users">

        </app-contacts-list>
        <app-messages-view
          (sendMessage)="recieveMessage($event)"
          [messages]="messages"
          [selectedUser]="selectedUser"
        ></app-messages-view>
      </div>
    </div>


    <div class="col-md-6">
      <div *ngIf="selectedUser== undefined" class="chat-box">
        <div class="card" style="width:100%">
          <div class="card-header">
            <h5> {{authService.currentUser.name}} {{authService.currentUser.lastName}}'s informations</h5>
          </div>
          <div class="card-body" style="white-space: pre-wrap; overflow: scroll;">
            <div>
              <strong style="color: darkblue">UserName : </strong> <b> {{authService.currentUser.id}}</b>
            </div>
            <div>
              <strong style="color: darkblue">Public Key : </strong> <b> {{authService.currentUser.pubkey}}</b>
            </div>
            <div>
              <strong style="color: darkblue">Certificate : </strong> <b> {{authService.currentUser.certificate}} </b>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="selectedUser" class="chat-box">
        <div class="card" style="width:100%">
          <div class="card-header">
            <h5> {{selectedUser.name}} {{selectedUser.lastName}}'s informations</h5>
          </div>
          <div class="card-body" style="white-space: pre-wrap; overflow: scroll;">
            <div>
              <strong style="color: darkblue">user name : </strong> <b> {{selectedUser.id}}</b>
            </div>
            <div>
              <strong style="color: darkblue">public key : </strong> <b> {{selectedUser.pubkey}}</b>
            </div>
            <div>
              <strong style="color: darkblue">certificate : </strong> <b> {{selectedUser.certificate}} </b>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="chat-box">
        <div class="card" style="width:100%">
          <div class="card-header">
            <h5>
              Private key
            </h5></div>
          <div class="card-body" style="white-space: pre-wrap;">
      <textArea placeholder="enter your private key"
                #privatekey
                style="width: 100%; height: 350px">
</textArea>
            <button (click)="onSendkey(privatekey.value)" class="btn btn-primary">load key</button>
          </div>
        </div>


      </div>
    </div>


    <div class="col-md-6">
      <div class="chat-box">
        <div class="container" style="white-space: pre-wrap; overflow: scroll;">
          <div *ngFor="let message of filterMessagesEncrypted()" class="row" style="display:inline-block">
            <div class="col-lg-9">
              <b style="color:green">FROM: {{message.senderName}}</b> <b style="color:red"> To
              : {{message.recieverName}}</b>
              <div><b style="color: darkblue">Content: </b>
                {{message.content}}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
